---
output: github_document
---

## Example

Here's some [roxygen](https://roxygen2.r-lib.org) documentation for a function:

```r
```{r, echo = FALSE, results = "asis"}
rox <- r"--[
#' Safe mean
#' 
#' @param x Numeric vector
#' @return The mean of `x`
#' 
#' @doctest
#' @expect equal(2)
#' safe_mean(1:3)
#' 
#' @expect warning("not numeric")
#' safe_mean("a")
#'
#' @expect warning("NA elements")
#' safe_mean(c(1, NA))
safe_mean <- function (x) {
  if (! is.numeric(x)) warning("x is not numeric")
  if (any(is.na(x))) warning("x contains NA elements")
  mean(x)
}
]--"
cat(rox)
```
```

Instead of an `@examples` section, we have a `@doctest` section.

This will create tests like:

```{r, echo = FALSE, warning = FALSE, comment=""}
library(doctest)
library(roxygen2)
results <- roc_proc_text(dt_roclet(), rox)
roclet_output(dt_roclet(), results)
```

The .Rd file will be created as normal, with an example section like:

```{r, echo = FALSE, warning = FALSE, comment=""}
results <- roc_proc_text(rd_roclet(), rox)
text <- format(results[[1]])
cat(gsub(".*\\\\examples", "\\\\examples", text))
```

